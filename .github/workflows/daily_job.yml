name: LinkedIn Auto Apply Bot

# GÃ¼nlÃ¼k Ã§alÄ±ÅŸma zamanÄ± (UTC)
# Cron formatÄ±: dakika saat gÃ¼n ay haftanÄ±n_gÃ¼nÃ¼
# '0 8 * * *' = Her gÃ¼n saat 08:00 UTC'de (TÃ¼rkiye saati 11:00)
on:
  schedule:
    - cron: '0 8 * * *'  # Her gÃ¼n sabah 08:00 UTC (TR: 11:00)
  
  # Manuel Ã§alÄ±ÅŸtÄ±rma iÃ§in
  workflow_dispatch:

jobs:
  linkedin-auto-apply:
    runs-on: ubuntu-latest
    
    steps:
      # 1. Kodu GitHub'dan Ã§ek
      - name: ğŸ“¥ Repo'yu klonla
        uses: actions/checkout@v4
        
      # 2. Python kurulumu
      - name: ğŸ Python kurulumu
        uses: actions/setup-python@v4
        with:
          python-version: '3.11'
          
      # 3. Chrome tarayÄ±cÄ±sÄ±nÄ± kur (Selenium iÃ§in)
      - name: ğŸŒ Chrome tarayÄ±cÄ±sÄ± kurulumu
        uses: browser-actions/setup-chrome@latest
        with:
          chrome-version: stable
          
      # 4. Python paketlerini yÃ¼kle
      - name: ğŸ“¦ Python paketlerini yÃ¼kle
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt
          
      # 5. ChromeDriver'Ä± kur
      - name: ğŸš— ChromeDriver kurulumu
        uses: nanasess/setup-chromedriver@v2
        with:
          chromedriver-version: 'latest'
          
      # 6. LinkedIn botunu Ã§alÄ±ÅŸtÄ±r
      - name: ğŸ¤– LinkedIn botunu Ã§alÄ±ÅŸtÄ±r
        env:
          LINKEDIN_EMAIL: ${{ secrets.LINKEDIN_EMAIL }}
          LINKEDIN_PASSWORD: ${{ secrets.LINKEDIN_PASSWORD }}
        run: |
          echo "ğŸš€ LinkedIn Bot baÅŸlatÄ±lÄ±yor..."
          python main.py
          
      # 7. Log dosyalarÄ±nÄ± kaydet (hata durumunda)
      - name: ğŸ“‹ Log dosyalarÄ±nÄ± yÃ¼kle
        uses: actions/upload-artifact@v3
        if: always()  # Her durumda Ã§alÄ±ÅŸsÄ±n (baÅŸarÄ±/baÅŸarÄ±sÄ±zlÄ±k)
        with:
          name: linkedin-bot-logs
          path: |
            linkedin_bot.log
            linkedin_session.json
          retention-days: 7  # 7 gÃ¼n saklasÄ±n
